## 9.1
- 实验对比
  - 树形结构rules检索
  - 纯向量余弦相似度检索，条件作为根节点，操作为分支
- 写纯series ragRules实现
- 读一篇nl2sql文献
- rule prompt有问题，ouputs column order没有条件
## 9.4
- 通过将相似question的rule送入prompt，不仅能使模型对理解schema偏好，realworld常见的sql错误也可以被避免
- 切入点：训练小模型达到text2sql sota（因为对于像Spider这样的数据集来说，没有docuent大模型也能达到很高ac）

## 9.7
- 数据集合成还是没跑完，还差最后2000条rules获取
- 阅读论文“Synthesizing Text-to-SQL Data from Weak and Strong LLMs”
  - 使用强LLM和弱LLM分别生成text2sql问答数据集，其中弱LLM的弱数据同时包含正确和错误问答。
  - 强数据用于第一轮SFT，弱数据经执行器验证后被模型用于进行第二轮偏好学习DPO
- 阅读论文“Direct Preference Optimization: Your Language Model is Secretly a Reward Model”
  - 了解PPO，DPO的原理
  - 需要主动合成负样本，之前的ReF-SQL中使用Mahalanobis Contrastive Learning直接取距离远的样本为负，也能取得很好的效果
- 下周准备实现针对rules的retrieve方案