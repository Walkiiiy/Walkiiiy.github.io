---
title: IpSec
date: 2025-03-12 11:46:16
tags:
---
IpV6必须,IpV4可选
* 可靠性认证
* 完整性,机密性
* 位于网络层与数据链路层之间
## 安全关联SA与安全策略SP数据库  
- **安全关联（SA）**：是指通信双方在IPSec中共享的安全参数集，包括加密算法、认证算法、密钥等。每个SA用于保护单向通信流，必须为双向通信创建两个SA。  
- **安全策略（SP）数据库**：存储关于如何处理数据流的规则和策略，包括加密、认证算法及其参数。SA和SP数据库共同决定了如何保护数据通信。

## 传输模式  
- 在传输模式下，**IP数据包的有效负载**（即数据部分）会被加密和/或认证，而IP头部保持不变。  
- 传输模式通常由终端主机（如计算机）实现，用于端到端的通信。

## 隧道模式  
- 在隧道模式下，整个原始IP数据包（包括IP头）会被封装，新的IP头会添加到加密或认证后的数据包前。  
- 这一模式通常由路由器或网关实现，用于站点到站点的通信或VPN连接。

## 认证头AH  
- **认证头（AH）**提供数据包的**完整性检查**和**身份认证**，确保数据未被篡改，并且确认数据来自合法的发送方。  
- 然而，AH并不对数据进行**加密**，因此不提供数据的机密性保护。

## 载荷封装ESP  
- **载荷封装（ESP）**同时提供数据的**完整性检查**、**身份认证**和**加密**，确保数据在传输过程中不仅不被篡改，而且保护其机密性。  
- ESP比AH更常用，因为它可以提供对数据内容的加密保护。

## 密钥交换与身份验证IKE  
- **IKE（Internet Key Exchange）**协议用于协商安全参数、交换密钥并进行身份验证，确保通信双方合法性和通信的安全性。  
- IKE与TLS握手相似，都使用密钥交换和身份验证过程，IKE主要用于建立IPSec的加密连接，而TLS用于建立安全的应用层通信。